# 도구 호출 디버깅 가이드

## 도구가 호출되지 않는 경우 확인사항

### 1. 모델 확인
- **지원 모델**: gpt-4o, gpt-4o-mini, gpt-4-turbo
- **지원 안됨**: gpt-4.1-nano, gpt-3.5-turbo (제한적)

현재 설정: `gpt-4o-mini` ✅

### 2. 테스트 방법

**비스트리밍 모드로 테스트** (권장):
```bash
# 스트리밍 없이 도구만 활성화
bun run dev chat -m openai -t

# 또는
bun run ot
```

**스트리밍 모드**:
```bash
# 모든 기능 활성화
bun run oa
```

### 3. 디버그 로그 확인

터미널에서 다음과 같은 로그가 표시됩니다:
```
[DEBUG] Tool enabled, finish_reason: tool_calls
[DEBUG] Tool calls: 1
```

### 4. 효과적인 질문 방법

❌ 모호한 질문:
- "시간 알려줘"
- "날씨 어때?"

✅ 명확한 질문:
- "현재 시간을 확인해주세요"
- "서울의 날씨를 알려주세요"
- "100 더하기 200을 계산해주세요"

### 5. 스트리밍 모드 특징

스트리밍 모드에서는:
- 도구 호출이 청크로 나누어 전달됨
- `[tool_name]: result` 형식으로 결과 표시
- 실시간으로 응답이 스트리밍됨

### 6. 문제 해결

1. **도구가 호출되지 않음**:
   - 비스트리밍 모드로 테스트
   - 더 명확한 질문 사용
   - 모델이 gpt-4o-mini인지 확인

2. **에러 발생**:
   - API 키 확인
   - 네트워크 연결 확인
   - 모델 할당량 확인

3. **잘못된 응답**:
   - 시스템 프롬프트가 제대로 설정되었는지 확인
   - clear 명령으로 대화 초기화 후 재시도